!function(t){"use strict";var o=function(){return{optionsStorage_initialize:function(t){this.optionsStorage={id:t.id||"",name:t.name||"",propertyNames:[],storageId:t.storageId||"",inSession:t.inSession||!1,afterLoad:t.afterLoad||null,beforeSave:t.beforeSave||null,context:t.context||this},this.osAdd(t.propertyNames)},optionsStorage_add:function(t){this.optionsStorage.propertyNames=this.optionsStorage.propertyNames||[],t&&this.optionsStorage.propertyNames.push.apply(this.optionsStorage.propertyNames,Array.isArray(t)?t:[t])},optionsStorage_remove:function(t){var o,s=this.optionsStorage.propertyNames.length;for(o=0;s>o;o++)if(this.optionsStorage.propertyNames[o]==t){this.optionsStorage.propertyNames.splice(o,1);break}},_optionsStorage_getStorageId:function(t){return t=t||this.optionsStorage.storageId,this.optionsStorage.storageId=this.optionsStorage.storageId||t,t},_optionsStorage_getStore:function(t){return t||this.optionsStorage.inSession?sessionStorage:localStorage},_optionsStorage_copyOptions:function(t,o){if(t&&o){var s,e,i=this.optionsStorage.propertyNames.length;for(s=0;i>s;s++)e=this.optionsStorage.propertyNames[s],t.hasOwnProperty(e)&&(o[e]=t[e])}},_optionsStorage_apply:function(t,o){t&&t.apply(o||this.optionsStorage.context)},optionsStorage_asString:function(){var t={};return this._optionsStorage_copyOptions(this.options,t),JSON.stringify(t)},optionsStorage_load:function(t,o,s,e){t=this._optionsStorage_getStorageId(t);var i=this._optionsStorage_getStore(o),r=JSON.parse(i.getItem(t));this._optionsStorage_copyOptions(r,this.options),this._optionsStorage_apply(s||this.optionsStorage.afterLoad,e)},optionsStorage_save:function(t,o,s,e){if(t=this._optionsStorage_getStorageId(t),!t)return!1;this._optionsStorage_apply(s||this.optionsStorage.beforeSave,e);var i=this._optionsStorage_getStore(o),r=this.optionsStorage_asString();return i.setItem(t,r),i.getItem(t)==r},osInitialize:function(){this.optionsStorage_initialize.apply(this,arguments)},osAdd:function(){this.optionsStorage_add.apply(this,arguments)},osRemove:function(){this.optionsStorage_remove.apply(this,arguments)},osAsString:function(){this.optionsStorage_asString.apply(this,arguments)},osLoad:function(){this.optionsStorage_load.apply(this,arguments)},osSave:function(){this.optionsStorage_save.apply(this,arguments)}}}();t.OptionsStorage=o}(this,document);